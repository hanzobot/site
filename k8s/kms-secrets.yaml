# Hanzo Bot Secrets via Hanzo KMS (kms.hanzo.ai)
#
# Prerequisites:
# 1. Create project "hanzo-bot" in KMS with env "production".
# 2. Add these secret keys at path /:
#    - HANZO_API_KEY            (per-user Hanzo API key, routes through LLM Gateway)
#    - BOT_GATEWAY_TOKEN
#    - BOT_GATEWAY_PASSWORD
#    - AUTH_GITHUB_ID           (OAuth for bot app onboarding)
#    - AUTH_GITHUB_SECRET
#    - AUTH_GITLAB_ID           (optional)
#    - AUTH_GITLAB_SECRET       (optional)
#    - DISCORD_BOT_TOKEN        (optional)
#    - TELEGRAM_BOT_TOKEN       (optional)
#    - SLACK_BOT_TOKEN          (optional)
#    - SLACK_APP_TOKEN          (optional)
# 3. Create a machine identity with read access.
# 4. Create/rotate auth secret out-of-band (do not commit plaintext credentials):
#      kubectl -n hanzo create secret generic bot-kms-auth \
#        --from-literal=clientId=<id> \
#        --from-literal=clientSecret=<secret> \
#        --dry-run=client -o yaml | kubectl apply -f -
---
apiVersion: secrets.lux.network/v1alpha1
kind: KMSSecret
metadata:
  name: bot-kms-sync
  namespace: hanzo
  labels:
    app.kubernetes.io/name: hanzo-bot
    app.kubernetes.io/component: secrets
spec:
  hostAPI: https://kms.hanzo.ai
  resyncInterval: 60
  authentication:
    universalAuth:
      credentialsRef:
        secretName: bot-kms-auth
        secretNamespace: hanzo
      secretsScope:
        projectSlug: hanzo-bot
        envSlug: production
        secretsPath: /
  managedSecretReference:
    secretName: bot-secrets
    secretNamespace: hanzo
    secretType: Opaque
